<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="title">Mis Servicios</h3>
    <button class="btn btn-success" (click)="abrirModal()">
      Nuevo Servicio
    </button>
  </div>

  <div *ngIf="!servicios || servicios.length === 0" class="alert alert-info">
    No tienes servicios registrados.
  </div>

  <div class="table-container" *ngIf="servicios && servicios.length > 0">
    <table class="table table-striped table-hover align-middle">
      <thead class="table-dark">
        <tr>
          <th>#</th>
          <th>Nombre</th>
          <th>Descripción</th>
          <th>Precio (S/)</th>
          <th>Imagen</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let servicio of servicios; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ servicio.nombre }}</td>
          <td>{{ servicio.descripcion || "—" }}</td>
          <td>{{ servicio.precio | number : "1.2-2" }}</td>
          <td>
            <div *ngIf="servicio.imgBase64; else noImage" class="img-preview">
              <img
                [src]="servicio.imgBase64"
                alt="{{ servicio.nombre }}"
                (error)="servicio.imgBase64 = 'assets/images/default.jpg'"
                class="img-fluid"
              />
            </div>
            <ng-template #noImage>
              <span class="text-muted">Sin imagen</span>
            </ng-template>
          </td>
          <td>
            <button
              class="btn btn-warning btn-sm me-2"
              (click)="editarServicio(servicio)"
            >
              <i class="bi bi-pencil"></i> Editar
            </button>
            <button
              class="btn btn-danger btn-sm"
              (click)="eliminarServicio(servicio.idServicio)"
            >
              <i class="bi bi-trash"></i> Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Modal reutilizado -->
<app-crear-servicio
  [servicioSeleccionado]="servicioSeleccionado"
  (servicioGuardado)="cargarServicios()"
  
>
</app-crear-servicio>

